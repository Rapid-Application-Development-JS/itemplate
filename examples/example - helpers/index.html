<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>incremental-dom helpers</title>
    <script src="//underscorejs.org/underscore-min.js"></script>
    <script src="../lib/incremental-dom.js"></script>
    <script src="../../bin/itemplate.js"></script>
</head>
<body>
<div id="container"></div>
<script type="x-template" id="underscore-template">
    <div class="topcoat-navigation-bar__title"> <%- data.listTitle %></div>
    <ul>
        <% var a = 45, size='12px'; _.each( data.listItems, function(listItem, i){ %>
        <li class="row <%=(i % 2 == 1 ? ' even' : '')%> topcoat-list__item">
            <%- listItem.name %>
            <% if (listItem.hasOlympicGold){ %>
            <em>*</em>
            <% } %>
        </li>
        <% }); %>
    </ul>

    <my-console font="12px" data="<%=a+7+8%>"/>

    <my-footnote font="<%=size%>">
        <em>* Olympic gold medalist</em>
    </my-footnote>

    <!--<% var showFootnote = _.any(-->
    <!--_.pluck( data.listItems, "hasOlympicGold" )-->
    <!--); %>-->
    <!--<p style="font-size: 12px;">-->
        <!--<em>* Olympic gold medalist</em>-->
    <!--</p>-->
    <!--<% if ( showFootnote ){ %>-->
    <!--<% } %>-->
</script>
<script>
    var patch = IncrementalDOM.patch;

    var templateData = {
        listTitle: "Olympic Volleyball Players",
        listItems: [
            {
                name: "Misty May-Treanor",
                hasOlympicGold: true
            },
            {
                name: "Kerri Walsh Jennings",
                hasOlympicGold: true
            },
            {
                name: "Jennifer Kessy",
                hasOlympicGold: false
            },
            {
                name: "April Ross",
                hasOlympicGold: false
            }
        ]
    };

    itemplate.registerHelper('my-console', function (attrs) {
        console.log(attrs);
    });

    itemplate.registerHelper('my-footnote', function (attrs, contentFn) {
        console.log('my-footnote', attrs, contentFn);
    });

    var render = itemplate.compile(document.getElementById('underscore-template').innerHTML, IncrementalDOM);
    patch(document.querySelector('#container'), render, templateData);
</script>
</body>
</html>